{"version":3,"file":"cuicpro-brackets/view.js","mappings":"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","sources":["webpack://cuicpro/external window [\"wp\",\"interactivity\"]","webpack://cuicpro/webpack/bootstrap","webpack://cuicpro/webpack/runtime/compat get default export","webpack://cuicpro/webpack/runtime/define property getters","webpack://cuicpro/webpack/runtime/hasOwnProperty shorthand","webpack://cuicpro/webpack/runtime/make namespace object","webpack://cuicpro/./src/cuicpro-brackets/view.js"],"sourcesContent":["module.exports = window[\"wp\"][\"interactivity\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { store, getContext } from \"@wordpress/interactivity\";\n\nconst { state } = store(\"cuicpro-brackets\", {\n\tstate: {\n\t\tisBracketOpen: false,\n\t\tbracketId: null,\n\t},\n\tactions: {\n\t\ttoggleBracket() {\n\t\t\tconst context = getContext();\n\n\t\t\tconst bracketId = context.bracketId;\n\n\t\t\tfor (const key in context.bracketsState) {\n\t\t\t\tif (key === \"bracketId_\" + bracketId) continue;\n\t\t\t\tif (key.startsWith(\"bracketId_\")) context.bracketsState[key] = false;\n\t\t\t}\n\n\t\t\t// clean scroll events\n\t\t\tjQuery(\"#bracket_\" + bracketId).off(\"scroll\");\n\t\t\tjQuery(\".leader-line\").remove();\n\n\t\t\tstate.bracketId = bracketId;\n\n\t\t\tstate.isBracketOpen = !context.bracketsState[\"bracketId_\" + bracketId];\n\n\t\t\tcontext.bracketsState[\"bracketId_\" + bracketId] =\n\t\t\t\t!context.bracketsState[\"bracketId_\" + bracketId];\n\t\t},\n\t},\n\tcallbacks: {\n\t\tdrawLines: () => {\n\t\t\tconst context = getContext();\n\t\t\tconst bracketId = context.bracketId;\n\n\t\t\t// clean scroll events\n\t\t\tjQuery(\"#bracket_\" + bracketId).off(\"scroll\");\n\n\t\t\t// add lines to elements\n\t\t\tif (!state.isBracketOpen || state.bracketId !== bracketId) return;\n\t\t\tjQuery(\".leader-line\").remove();\n\n\t\t\tconst bracket = jQuery(\"#bracket_\" + bracketId);\n\t\t\tconst rounds = bracket.find(\".bracket-round\");\n\n\t\t\tfor (let i = rounds.length - 1; i > 0; i--) {\n\t\t\t\tconst matches = rounds[i].children;\n\t\t\t\tfor (let j = 0; j < matches.length; j++) {\n\t\t\t\t\tconst match = matches[j];\n\t\t\t\t\tconst matchAttr = match.attributes;\n\t\t\t\t\tif (\n\t\t\t\t\t\t!matchAttr[\"class\"].value.includes(\"line-required-up\") &&\n\t\t\t\t\t\t!matchAttr[\"class\"].value.includes(\"line-required-down\")\n\t\t\t\t\t)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tconst matchId = matchAttr[\"id\"].value;\n\n\t\t\t\t\tconst matchLink1 = rounds[i - 1].children[j * 2];\n\t\t\t\t\tconst matchLink2 = rounds[i - 1].children[j * 2 + 1];\n\n\t\t\t\t\tif (matchAttr[\"class\"].value.includes(\"line-required-up\")) {\n\t\t\t\t\t\tconst line1 = new LeaderLine(\n\t\t\t\t\t\t\tdocument.getElementById(matchLink1.attributes[\"id\"].value),\n\t\t\t\t\t\t\tdocument.getElementById(matchId),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcolor: \"#f6931f\",\n\t\t\t\t\t\t\t\tsize: 2,\n\t\t\t\t\t\t\t\tendPlug: \"behind\",\n\t\t\t\t\t\t\t\tendPlugSize: 2,\n\t\t\t\t\t\t\t\tpath: \"grid\",\n\t\t\t\t\t\t\t\tstartSocket: \"right\",\n\t\t\t\t\t\t\t\tendSocket: \"left\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tjQuery(\"#bracket_\" + bracketId).on(\"scroll\", function () {\n\t\t\t\t\t\t\tline1.position();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (matchAttr[\"class\"].value.includes(\"line-required-down\")) {\n\t\t\t\t\t\tconst line2 = new LeaderLine(\n\t\t\t\t\t\t\tdocument.getElementById(matchLink2.attributes[\"id\"].value),\n\t\t\t\t\t\t\tdocument.getElementById(matchId),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcolor: \"#f6931f\",\n\t\t\t\t\t\t\t\tsize: 2,\n\t\t\t\t\t\t\t\tendPlug: \"behind\",\n\t\t\t\t\t\t\t\tendPlugSize: 2,\n\t\t\t\t\t\t\t\tpath: \"grid\",\n\t\t\t\t\t\t\t\tstartSocket: \"right\",\n\t\t\t\t\t\t\t\tendSocket: \"left\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tjQuery(\"#bracket_\" + bracketId).on(\"scroll\", function () {\n\t\t\t\t\t\t\tline2.position();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst container = jQuery(\"#brackets-data\");\n\t\t\tconst lines = jQuery(\".leader-line\");\n\t\t\tjQuery(\"#bracket_\" + bracketId).on(\"scroll\", function () {\n\t\t\t\tlines.each(function (line) {\n\t\t\t\t\tlines[line].style.removeProperty(\"display\");\n\t\t\t\t\tconst lineEl = lines[line];\n\t\t\t\t\tconst containerRect = container[0].getBoundingClientRect();\n\t\t\t\t\tconst lineRect = lineEl.getBoundingClientRect();\n\n\t\t\t\t\tconst isOutside =\n\t\t\t\t\t\tlineRect.right > containerRect.right ||\n\t\t\t\t\t\tlineRect.left < containerRect.left;\n\n\t\t\t\t\tif (!isOutside) {\n\t\t\t\t\t\tlineEl.style.removeProperty(\"display\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlineEl.style.setProperty(\"display\", \"none\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t},\n});\n"],"names":["store","getContext","state","isBracketOpen","bracketId","actions","toggleBracket","context","key","bracketsState","startsWith","jQuery","off","remove","callbacks","drawLines","bracket","rounds","find","i","length","matches","children","j","match","matchAttr","attributes","value","includes","matchId","matchLink1","matchLink2","line1","LeaderLine","document","getElementById","color","size","endPlug","endPlugSize","path","startSocket","endSocket","on","position","line2","container","lines","each","line","style","removeProperty","lineEl","containerRect","getBoundingClientRect","lineRect","isOutside","right","left","setProperty"],"sourceRoot":""}